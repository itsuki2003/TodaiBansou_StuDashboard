# 状態管理方針

本アプリケーションにおける状態（State）は、「サーバーの状態」と「UI の状態」の 2 つに大別し、それぞれに適した方法で管理する。

## 1. サーバーの状態 (Server State)

データベースから API 経由で取得・更新するデータ（生徒情報、成績、スケジュールなど）を指す。

- **方針:**
  - データ取得ライブラリ（**SWR** または **React Query (TanStack Query)**）を全面的に採用する。
- **採用理由:**
  - **キャッシュ機能:** 一度取得したデータを自動でキャッシュし、再表示を高速化する。
  - **自動再検証:** ユーザーがウィンドウにフォーカスを戻した際などに、データを自動で最新の状態に更新してくれる。
  - **ローディング・エラー状態の管理:** データ取得中やエラー発生時の状態管理が非常に容易になる。
  - これにより、自前で複雑なデータ取得ロジックを実装する必要がなくなり、コードの記述量を大幅に削減できる。

## 2. UI の状態 (UI State)

UI コンポーネントの表示状態（モーダルの開閉、選択中のタブなど）や、複数のコンポーネント間で共有する必要があるクライアント側のデータを指す。

- **方針:**
  - **基本:** React 標準のフック（`useState`, `useContext`）を基本とする。親子関係にあるコンポーネント間の単純な状態の受け渡しは、Props で行う。
  - **複数のコンポーネント間で共有する複雑な状態:** `useContext`と`useReducer`を組み合わせたパターン、または軽量な状態管理ライブラリ（**Zustand** や **Jotai**）の利用を検討する。
- **採用理由:**
  - まずは React の標準機能でシンプルに実装し、状態の受け渡しが複雑になりすぎた（いわゆる「バケツリレー」が発生した）箇所から、より高度なライブラリの導入を検討することで、過剰な設計（オーバースペック）を防ぐ。

## 3. フォームの状態 (Form State)

ユーザーからの入力値を管理する状態。

- **方針:**
  - **React Hook Form** などのフォーム管理ライブラリを採用する。
- **採用理由:**
  - 入力値の管理、バリデーション（入力チェック）、エラーメッセージの表示といった、フォームに関連する煩雑な処理を効率的に実装できる。
