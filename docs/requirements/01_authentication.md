# 1. 認証機能

## 1-1. ログイン画面

### 1. UI/UX 設計（ワイヤーフレーム）

- **画面タイトル:** ログイン
- **入力フォーム:**
  - **メールアドレス:** テキスト入力欄
  - **パスワード:** パスワード入力欄（入力中は文字が隠れる）
- **操作ボタン:**
  - **ログインボタン:** 「ログイン」
- **エラーメッセージ表示エリア:**
  - ログイン失敗時に「メールアドレスまたはパスワードが正しくありません」といったメッセージを表示する。

### 2. DB 設計

- **関連テーブル:** `instructors`
- **利用カラム:**
  - `email`: ログイン ID として利用。一意（ユニーク）である必要がある。
  - `password_digest`: ハッシュ化されたパスワードを保存。

### 3. 詳細機能仕様

- **基本フロー:**
  1. ユーザーがメールアドレスとパスワードを入力し、「ログインボタン」を押す。
  2. システムは、入力されたメールアドレスを元に`instructors`テーブルからユーザーを検索する。
  3. ユーザーが見つかった場合、入力されたパスワードと、DB に保存されている`password_digest`を照合する。
  4. 認証が成功した場合、セッションを開始し、**生徒一覧画面**にリダイレクトする。
- **異常系フロー（エラー処理）:**
  - メールアドレスが存在しない、またはパスワードが一致しない場合、「メールアドレスまたはパスワードが正しくありません」というエラーメッセージを表示する。
  - 複数回ログインに失敗した場合、アカウントを一時的にロックする機能も将来的には検討する（今回は見送り）。
- **セッション管理:**
  - ログイン成功後、ユーザー情報をセッションに保存し、ログイン状態を維持する。
  - ログアウト機能も別途必要となる。

## 1-2. パスワードリセット機能

### UI/UX 設計

1. **申請画面:**
   - ログイン画面の「パスワードを忘れた場合はこちら」リンクから遷移する。
   - メールアドレスを入力するフォームと「送信」ボタンを設置。
2. **申請完了画面:**
   - 「パスワード再設定用の URL を記載したメールを送信しました」と表示。
3. **パスワード再設定画面:**
   - メール内の URL から遷移する。
   - 新しいパスワードを 2 回入力するフォームと「更新」ボタンを設置。

### 機能仕様

- ユーザーがメールアドレスを入力して送信すると、システムは一意で有効期限付きのトークンを生成し、再設定用 URL に含めてメールで送信する。
- ユーザーが新しいパスワードを入力して更新すると、DB の`password_digest`を更新する。
- トークンは一度使用されるか、有効期限（例: 1 時間）が切れると無効になる。
